<!DOCTYPE html>
<html class="wf-proximanovasoft-n4-active wf-proximanovasoft-n7-active wf-proximanovascosf-n4-active wf-proximanovascosf-n7-active wf-proximanova-n4-active wf-proximanova-n6-active wf-proximanova-n7-active wf-active" xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml"><head>
		    <title>Gravatar - Globally Recognized Avatars</title>
		<link rel="shortcut icon" href="http://en.gravatar.com/favicon.ico">
	<link rel="shortcut icon" href="http://en.gravatar.com/favicon.ico">
	<meta http-equiv="Content-type" content="text/html; charset=UTF-8">
	<meta http-equiv="Content-Language" content="en">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link href="Gravatar%20-%20Globally%20Recognized%20Avatars_files/style.css" type="text/css" rel="stylesheet" media="screen">
	<link href="Gravatar%20-%20Globally%20Recognized%20Avatars_files/profile.css" type="text/css" rel="stylesheet" media="screen">
	<link href="Gravatar%20-%20Globally%20Recognized%20Avatars_files/jquery_002.css" type="text/css" rel="stylesheet" media="screen">
	<script type="text/javascript" src="Gravatar%20-%20Globally%20Recognized%20Avatars_files/jquery_003.js"></script>
<script type="text/javascript" src="Gravatar%20-%20Globally%20Recognized%20Avatars_files/jquery-migrate.js"></script>
<script type="text/javascript" src="Gravatar%20-%20Globally%20Recognized%20Avatars_files/jquery.js"></script>
<script type="text/javascript" src="Gravatar%20-%20Globally%20Recognized%20Avatars_files/application.js"></script>
<script type="text/javascript" src="Gravatar%20-%20Globally%20Recognized%20Avatars_files/jquery_002.js"></script>
<link rel="stylesheet" type="text/css" href="Gravatar%20-%20Globally%20Recognized%20Avatars_files/jquery.css">
<link rel="stylesheet" type="text/css" href="Gravatar%20-%20Globally%20Recognized%20Avatars_files/skin.css">	
	<style type="text/css">
	/* Fonts */
	@font-face {
	  font-family: 'Automatticons';
	  src: url('http://s.gravatar.com/fonts/automatticons-regular-webfont.eot');
	  src: url('http://s.gravatar.com/fonts/automatticons-regular-webfont.eot?#iefix') format('embedded-opentype'), url('http://s.gravatar.com/fonts/automatticons-regular-webfont.woff') format('woff'), url('http://s.gravatar.com/fonts/automatticons-regular-webfont.ttf') format('truetype'), url('http://s.gravatar.com/fonts/automatticons-regular-webfont.svg#automatticonsregular') format('svg');
	  font-weight: normal;
	  font-style: normal;
	  -webkit-font-smoothing: antialiased;
	}
	</style>

		<script type="text/javascript" src="Gravatar%20-%20Globally%20Recognized%20Avatars_files/a.js"></script>
	<link href="Gravatar%20-%20Globally%20Recognized%20Avatars_files/css.css" rel="stylesheet" type="text/css">

	<script type="text/javascript" src="Gravatar%20-%20Globally%20Recognized%20Avatars_files/webtoolkit.js"></script>
		<!--[if lt IE 7.]>
		<script defer type="text/javascript" src="/js/pngfix.js"></script>
		<script defer type="text/javascript" src="/js/old-ie-hacks.js"></script>
	<![endif]-->
	
	<script type="text/javascript" src="Gravatar%20-%20Globally%20Recognized%20Avatars_files/llx8brg.js"></script>
	<style type="text/css">.tk-proxima-nova-soft{font-family:"proxima-nova-soft",sans-serif;}.tk-proxima-nova-sc-osf{font-family:"proxima-nova-sc-osf",sans-serif;}.tk-proxima-nova{font-family:"proxima-nova",sans-serif;}</style><link href="Gravatar%20-%20Globally%20Recognized%20Avatars_files/llx8brg-d.css" rel="stylesheet"><script type="text/javascript">try{Typekit.load();}catch(e){}</script>


	<script src="Gravatar%20-%20Globally%20Recognized%20Avatars_files/login.js"></script>
	<script type="text/javascript">
	$(function() {
		$( '#a8c-service-toggle' ).click( function() {
			var body = $( 'body' ),
				header = $( '#unified-header' ),
				dops = $( '#a8c-dops' );
			
			$( this ).parent().toggleClass( 'active' );
			body.toggleClass( 'dropped' );
			header.toggleClass( 'dropped' );
			dops.toggleClass( 'dropped' );
		});

		$("#responsive-menu-button").click(function( a ) {
		    a.preventDefault();
		    $(".main-nav").toggleClass("dropped");
		})

	});
	</script>

	<link rel="stylesheet" href="Gravatar%20-%20Globally%20Recognized%20Avatars_files/noticons.css">

</head>

<body id="pagesite-implement-images-php">

<div id="wrap">
	<div id="a8c-dops">
		<ul>
			<li class="wordpresscom">
				<a href="http://wordpress.com/">
					<strong>WordPress.com</strong>
					<small>Setup a blog in minutes.</small>
				</a>
			</li>
			<li class="vaultpress">
				<a href="http://vaultpress.com/">
					<strong>VaultPress</strong>
					<small>Backup and security scanning for your site.</small>
				</a>
			</li>
			<li class="akismet">
				<a href="http://akismet.com/">
					<strong>Akismet</strong>
					<small>The anti-spam service for the web.</small>
				</a>
			</li>
			<li class="polldaddy">
				<a href="http://polldaddy.com/">
					<strong>Polldaddy</strong>
					<small>Create surveys for the web and mobile.</small>
				</a>
			</li>
		</ul>
	</div>

	<div id="unified-header">
		<nav>
			<ul class="main-nav">
				<li>
				<a href="http://en.gravatar.com/" id="gr-logo">G</a>
				<a href="http://en.gravatar.com/" id="responsive-menu-button" class="icon">Menu</a>
				</li>
									<li><a href="http://en.gravatar.com/support/what-is-gravatar/">What is Gravatar?</a></li>
					<li><a href="http://en.gravatar.com/site/implement/">How to Use Gravatar</a></li>
								<li><a href="http://en.gravatar.com/support/">Help</a></li>
			</ul>

			<ul class="user-nav">
								<li id="wpcc-sign-in">
					<span class="wpcom" id="a8c-service-toggle"><span>WordPress.com</span></span>
					<a href="https://en.gravatar.com/connect/" class="button header_sign-in">Sign In</a>
				</li>
											</ul>

		</nav>
	</div>

		
	<div id="main">
		<div class="middle"> 			<div class="box">
				<div id="content">

					<script type="text/javascript" src="Gravatar%20-%20Globally%20Recognized%20Avatars_files/shCore.js"></script>
<script type="text/javascript" src="Gravatar%20-%20Globally%20Recognized%20Avatars_files/shBrushPhp.js"></script>
<link type="text/css" rel="stylesheet" href="Gravatar%20-%20Globally%20Recognized%20Avatars_files/shCore.css">
<link type="text/css" rel="stylesheet" href="Gravatar%20-%20Globally%20Recognized%20Avatars_files/shThemeDefault.css">
<script type="text/javascript">
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
<h2>PHP Image Requests</h2>
<p><a href="http://en.gravatar.com/site/implement/">‚Üê Back</a></p>

<p>Implementing gravatars with PHP is quite simple. PHP provides <code>strtolower()</code>, <code>md5()</code>, and <code>urlencode()</code> functions, allowing us to create the gravatar URL with ease. Assume the following data:</p>
<div><div id="highlighter_219770" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php variable">$email</code> <code class="php plain">= </code><code class="php string">"someone@somewhere.com"</code><code class="php plain">;</code></div><div class="line number2 index1 alt1"><code class="php variable">$default</code> <code class="php plain">= </code><code class="php string">"<a href="http://www.somewhere.com/homestar.jpg">http://www.somewhere.com/homestar.jpg</a>"</code><code class="php plain">;</code></div><div class="line number3 index2 alt2"><code class="php variable">$size</code> <code class="php plain">= 40;</code></div></div></td></tr></tbody></table></div></div>
<p>You can construct your gravatar url with the following php code:</p>
<div><div id="highlighter_840077" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php variable">$grav_url</code> <code class="php plain">= </code><code class="php string">"<a href="http://www.gravatar.com/avatar/">http://www.gravatar.com/avatar/</a>"</code> <code class="php plain">. md5( </code><code class="php functions">strtolower</code><code class="php plain">( trim( </code><code class="php variable">$email</code> <code class="php plain">) ) ) . </code><code class="php string">"?d="</code> <code class="php plain">. urlencode( </code><code class="php variable">$default</code> <code class="php plain">) . </code><code class="php string">"&amp;s="</code> <code class="php plain">. </code><code class="php variable">$size</code><code class="php plain">;</code></div></div></td></tr></tbody></table></div></div>
<p>Once the gravatar URL is created, you can output it whenever you please:</p>
<div><div id="highlighter_929633" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;img src=</code><code class="php string">"&lt;?php echo $grav_url; ?&gt;"</code> <code class="php plain">alt=</code><code class="php string">""</code> <code class="php plain">/&gt;</code></div></div></td></tr></tbody></table></div></div>

<h3 id="example">Example Implementation</h3>
<p>This function will allow you to quickly and easily insert a Gravatar into a page using PHP:</p>
<div><div id="highlighter_838785" class="syntaxhighlighter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php comments">/**</code></div><div class="line number2 index1 alt1"><code class="php spaces">&nbsp;</code><code class="php comments">* Get either a Gravatar URL or complete image tag for a specified email address.</code></div><div class="line number3 index2 alt2"><code class="php spaces">&nbsp;</code><code class="php comments">*</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;</code><code class="php comments">* @param string $email The email address</code></div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;</code><code class="php comments">* @param string $s Size in pixels, defaults to 80px [ 1 - 2048 ]</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;</code><code class="php comments">* @param string $d Default imageset to use [ 404 | mm | identicon | monsterid | wavatar ]</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;</code><code class="php comments">* @param string $r Maximum rating (inclusive) [ g | pg | r | x ]</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;</code><code class="php comments">* @param boole $img True to return a complete IMG tag False for just the URL</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;</code><code class="php comments">* @param array $atts Optional, additional key/value attributes to include in the IMG tag</code></div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;</code><code class="php comments">* @return String containing either just a URL or a complete image tag</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;</code><code class="php comments">* @source <a href="http://gravatar.com/site/implement/images/php/">http://gravatar.com/site/implement/images/php/</a></code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;</code><code class="php comments">*/</code></div><div class="line number13 index12 alt2"><code class="php keyword">function</code> <code class="php plain">get_gravatar( </code><code class="php variable">$email</code><code class="php plain">, </code><code class="php variable">$s</code> <code class="php plain">= 80, </code><code class="php variable">$d</code> <code class="php plain">= </code><code class="php string">'mm'</code><code class="php plain">, </code><code class="php variable">$r</code> <code class="php plain">= </code><code class="php string">'g'</code><code class="php plain">, </code><code class="php variable">$img</code> <code class="php plain">= false, </code><code class="php variable">$atts</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">() ) {</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$url</code> <code class="php plain">= </code><code class="php string">'<a href="http://www.gravatar.com/avatar/">http://www.gravatar.com/avatar/</a>'</code><code class="php plain">;</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$url</code> <code class="php plain">.= md5( </code><code class="php functions">strtolower</code><code class="php plain">( trim( </code><code class="php variable">$email</code> <code class="php plain">) ) );</code></div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$url</code> <code class="php plain">.= </code><code class="php string">"?s=$s&amp;d=$d&amp;r=$r"</code><code class="php plain">;</code></div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">( </code><code class="php variable">$img</code> <code class="php plain">) {</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$url</code> <code class="php plain">= </code><code class="php string">'&lt;img src="'</code> <code class="php plain">. </code><code class="php variable">$url</code> <code class="php plain">. </code><code class="php string">'"'</code><code class="php plain">;</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">foreach</code> <code class="php plain">( </code><code class="php variable">$atts</code> <code class="php keyword">as</code> <code class="php variable">$key</code> <code class="php plain">=&gt; </code><code class="php variable">$val</code> <code class="php plain">)</code></div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$url</code> <code class="php plain">.= </code><code class="php string">' '</code> <code class="php plain">. </code><code class="php variable">$key</code> <code class="php plain">. </code><code class="php string">'="'</code> <code class="php plain">. </code><code class="php variable">$val</code> <code class="php plain">. </code><code class="php string">'"'</code><code class="php plain">;</code></div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$url</code> <code class="php plain">.= </code><code class="php string">' /&gt;'</code><code class="php plain">;</code></div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$url</code><code class="php plain">;</code></div><div class="line number24 index23 alt1"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>

<h3>Existing Implementations</h3>
<ul>
	<li><a href="http://www.talkphp.com/script-giveaway/1905-gravatar-wrapper-class.html">Gravatar Wrapper Class</a></li>
	<li><a href="http://www.phpclasses.org/browse/package/4227.html">The Gravatar Class</a></li>
	<li><a href="https://github.com/emberlabs/gravatarlib">PHP 5.3, Namespaced library</a></li>
</ul>
					
				</div>
				<span class="clear"></span>
			</div>
			<span class="clear"></span>
		</div>
		<span class="clear"></span>
	</div>

	<div id="footer">
		<div class="footer-inner">
			<div class="primary">
				<ul id="vp-primary-footer">
					<li><a href="http://blog.gravatar.com/">Blog</a></li>
					<li><a href="http://en.gravatar.com/site/implement/">Developer Resources</a></li>
					<li><a href="http://en.gravatar.com/support/">Technical Support</a></li>
				</ul>

				<div id="a8c-attribution">
					<span>An <a href="http://automattic.com/">Automattic</a> Team</span>
				</div>
			</div>
			
			<div class="secondary">
				<ul id="vp-secondary-footer">
					<li><a href="http://en.gravatar.com/site/translations/">Languages</a></li>
					<li><a href="http://automattic.com/privacy/">Privacy Policy</a></li>
				</ul>
				
				<ul id="a8c-services">
					<li><a href="http://wordpress.com/">WordPress.com</a></li>
					<li><a href="http://vaultpress.com/">VaultPress</a></li>
					<li><a href="http://akismet.com/">Akismet</a></li>
					<li><a href="http://polldaddy.com/">Polldaddy</a></li>
				</ul>
			</div>
		</div>
	</div>

	<span class="clear"></span>
</div><!--/ #wrap -->
 <div id="overlay" style="display: none; height: 1480px; width: 1349px;"></div>
  <div style="display: none;" id="gravatar_confirmation_container">
 	<div id="gravatar_confirmation">
		&nbsp;
	</div>
 </div>
  <script type="text/javascript">
   var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
   document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
 </script><script src="Gravatar%20-%20Globally%20Recognized%20Avatars_files/ga.js" type="text/javascript"></script>
 <script type="text/javascript">
   var pageTracker = _gat._getTracker("UA-52447-14");
   pageTracker._initData();
   pageTracker._trackPageview();
</script>


</body></html>